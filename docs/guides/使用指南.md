# AI量化交易系统 - 纯真实数据模式

## 🚨 重要说明

**本系统已移除所有模拟数据，仅使用真实交易所API数据！**

## 🚀 系统特色

✅ **100%真实数据**: 仅从OKX和Binance获取真实市场数据  
✅ **双重保险**: OKX主要，Binance备用，确保数据可靠性  
✅ **WebSocket实时流**: 4Hz高频真实数据刷新  
✅ **Bloomberg风格**: 专业金融终端界面  
✅ **无Docker依赖**: 纯Python本地部署  
✅ **严格验证**: 所有数据都标记data_source: "real"  

## 📋 系统要求

- **Python**: 3.8+ (推荐3.12+)
- **内存**: 4GB+ RAM  
- **网络**: 稳定互联网连接
- **浏览器**: Chrome/Firefox/Safari

## 🔧 快速启动

### 方法1: 一键启动 (推荐)

```bash
# 1. 进入项目目录
cd trader

# 2. 运行启动脚本 (自动安装依赖)
python3 start.py
```

### 方法2: 手动启动

```bash
# 1. 创建虚拟环境
python3 -m venv venv

# 2. 安装依赖
./venv/bin/pip install aiohttp aiohttp-cors ccxt pandas numpy websockets

# 3. 启动服务器
./venv/bin/python server.py
```

### 方法3: 使用已有虚拟环境

```bash
# 如果你已经有虚拟环境
source your_venv/bin/activate
pip install aiohttp aiohttp-cors ccxt pandas numpy websockets  
python server.py
```

## 🌐 访问系统

启动成功后，打开浏览器访问：

- **前端界面**: http://localhost:8000
- **WebSocket测试**: ws://localhost:8000/ws  
- **API测试**: http://localhost:8000/api/market

## 📊 功能说明

### 1. 实时仪表盘
- 4Hz频率更新BTC、ETH、BNB、SOL价格
- Bloomberg风格专业界面
- 实时涨跌幅和24H统计

### 2. 数据来源
- **主要数据源**: OKX交易所API
- **备用数据源**: Binance交易所API  
- **失败处理**: API失败时显示错误消息，绝不使用模拟数据

### 3. WebSocket功能
- ✅ 仅推送真实价格数据
- ✅ 自动重连机制  
- ✅ 多币种并发真实数据更新
- ✅ API失败时发送错误消息（不发送假数据）

### 4. 数据验证机制
- 每条数据都包含 `"data_source": "real"` 标识
- 前端只接受和显示真实数据
- API失败时显示错误信息，不显示模拟数据

## 🔧 技术架构

```
前端 (HTML5/CSS3/JS) 
    ↕ WebSocket连接 (仅真实数据)
Python服务器 (aiohttp)
    ↕ REST API调用 (OKX主要 + Binance备用)
真实交易所API (OKX/Binance)
```

## 📝 日志说明

服务器启动时会显示：

```
✅ 交易所API初始化完成
🚀 启动实时数据流...  
✅ 服务器启动成功!
📊 前端界面: http://localhost:8000
🔌 WebSocket: ws://localhost:8000/ws
🚨 纯真实数据模式: 仅使用OKX/Binance真实API数据
```

## 🐛 常见问题

### 1. 依赖安装失败
```bash
# 确保使用正确的pip
./venv/bin/pip install -r requirements.txt

# 或者手动安装核心依赖
./venv/bin/pip install aiohttp ccxt pandas numpy
```

### 2. 端口占用
```bash
# 检查8000端口
lsof -i :8000

# 杀死占用进程
kill -9 <PID>
```

### 3. WebSocket连接失败
- 检查防火墙设置
- 确保8000端口未被占用
- 浏览器控制台查看错误信息

### 4. 数据获取失败
系统绝不会显示模拟数据，如果API失败会显示错误消息：
- 检查网络连接
- 确认交易所API服务正常
- 等待API连接恢复后继续获取真实数据
- 前端页面会显示"数据获取失败，正在重试..."

## 🔄 停止服务器

在终端中按 `Ctrl+C` 停止服务器

## 📈 测试API

```bash
# 获取BTC真实价格
curl "http://localhost:8000/api/market?symbol=BTC/USDT"
# 返回: {"success": true, "data": {"symbol": "BTC/USDT", "price": 116822.2, "exchange": "okx", "data_source": "real"}}

# 获取ETH真实价格  
curl "http://localhost:8000/api/market?symbol=ETH/USDT"
# 返回: {"success": true, "data": {"symbol": "ETH/USDT", "price": 4204.7, "exchange": "okx", "data_source": "real"}}

# AI分析（需要真实API密钥）
curl "http://localhost:8000/api/ai/analysis?symbol=BTC"
# 返回: {"success": false, "error": "AI分析功能需要配置真实的AI API密钥"}
```

### 🔍 真实数据验证
每个API响应都包含：
- `"exchange": "okx"` 或 `"binance"` - 数据来源交易所
- `"data_source": "real"` - 明确标识为真实数据
- 绝无 `"mock"` 或模拟数据标识

## 🎯 下一步

1. **实盘交易**: 配置真实API密钥进行交易
2. **数据存储**: 添加MongoDB存储历史数据
3. **策略回测**: 实现策略回测功能
4. **AI分析**: 集成真实AI分析API

## ⚠️ 重要声明

- ✅ **100%真实数据**: 系统只使用真实交易所API数据
- ✅ **数据透明**: 每条数据都明确标识来源和真实性
- ✅ **无模拟数据**: 已完全移除所有模拟数据生成逻辑
- 📊 **仅供学习**: 本系统用于数据展示和学习，不涉及真实资金交易
- 📋 **API合规**: 请遵守OKX和Binance的API使用条款

---

🎉 **恭喜！你已成功部署纯真实数据的AI量化交易系统！**

### 🔥 系统特色总结：
- 🚨 **零模拟数据**: 绝不使用任何模拟或虚假数据
- 📡 **双交易所**: OKX + Binance 双重数据源保障
- ⚡ **4Hz实时**: 高频真实数据刷新
- 🛡️ **严格验证**: 前端只接受data_source="real"的数据
- 💎 **Bloomberg级**: 专业金融终端体验

如有问题，请检查终端日志信息。系统已确保100%使用真实数据！